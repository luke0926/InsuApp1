@{
	Layout = "~/Views/Shared/_Layout.cshtml";
}

    <div class="row justify-content-end">
        <div class="col-md-offset-1 col-md-12">
            <div class="form-group form-inline">
                <select id="ChartType" class="form-control position-relative" style="width:auto">
                    <option selected class="text-secondary">--Zvolit graf--</option>
                    <option>bar</option>
                    <option>line</option>
                    <option>pie</option>
                    <option>doughnut</option>
                </select>
            </div>
            <div class="col-md-6 mt-2">
                <input id="ID" value="Zobrazit" type="button" class="btn btn-outline-secondary" />
            </div>
        </div>
    </div>
            
    <br />

    <div id="ChartView">
        <canvas id="myChart"></canvas>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script type="text/javascript">

        $(function(){
            $("#ID").click(function(){

                var chartType=$("#ChartType").val();
                var chartView=document.getElementById('ChartView');

                chartView.innerHTML='&nbsp;';
                $('#ChartView').append('<canvas id="myChart" style="max-width:1500px;max-height:600px;"><canvas>');
                $.ajax({
                    type: "POST",
                    url: "/SalesRecord/GetSalesData",
                    data: "",
                    contextType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: OnSuccessResult,
                    error: OnError
                });

                function OnSuccessResult (data){

                    var _data=data;
                    var _chartLabels=_data[0];
                    var _chartData=_data[1];

                    var barColor = ["rgba(54, 162, 235, 0.5)", "rgba(248,187,208,0.5)", "rgba(29,233,182,0.5)", "rgba(189,189,189,0.5)", "rgba(255,229,127,0.5)", "rgba(225,190,231,0.5)"];

                    new Chart("myChart",
                    {

                        type:chartType,
                        data: {
                            labels: _chartLabels,
                            datasets : [{
                                backgroundColor: barColor,
                                data: _chartData,
                                label: 'Vývoj ceny pojištění',
                            }]
                        }
                    });
                }

                function OnError (err){

                }
            });
        });
    
    </script>
